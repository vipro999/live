<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Get Coins">
<link rel="apple-touch-icon" href="icon-192.png">
<link rel="manifest" href="manifest.json">
<title>Get Coins</title>
<style>
*{box-sizing:border-box;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;margin:0;padding:0}
body{background:#fff;color:#111;display:flex;flex-direction:column;align-items:center;padding:8px;max-width:480px;margin:0 auto;}
header{width:100%;display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;padding-top:env(safe-area-inset-top)}
header img{height:32px}
header h1 {
    font-size: 1.3rem;
    font-weight: 700;
    text-align: center;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
}
header h1{font-size:1.3rem;font-weight:700}
.stats{width:100%;background:#f9f9f9;padding:12px;border-radius:10px;margin-bottom:14px;box-shadow:0 2px 6px rgba(0,0,0,0.04)}
.stats div{font-weight:700}
.input-section{width:100%;margin-bottom:12px}
.input-section input{width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;font-size:1rem}
.coins-grid{width:100%;display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:14px 0}
.coin-card{border:1px solid #e6e6e9;border-radius:10px;padding:12px;text-align:center;cursor:pointer;background:#fff;transition:all .15s;display:flex;flex-direction:column;align-items:center;gap:8px}
.coin-card:active{transform:scale(.98)}
.coin-card.active{border:2px solid #ff0050;background:linear-gradient(180deg,#fff7fb,#fff)}
.coin-top{display:flex;align-items:center;gap:8px;font-weight:800}
.coin-top img{width:20px;height:20px}
.price{color:#666;font-size:0.92rem}
.promo{width:100%;background:#f1f9ff;border-left:4px solid #007bff;padding:12px;border-radius:8px;font-size:0.9rem;margin-bottom:14px;text-align:left}
.payment-section{width:100%;margin-bottom:12px}
.payment-methods{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:8px}
.method{border:1px solid #ddd;border-radius:10px;padding:10px;text-align:center;cursor:pointer;background:#fafafa;transition:.15s;display:flex;flex-direction:column;align-items:center;gap:6px}
.method img{height:28px}
.method.active{border:2px solid #00c853;background:#f0fff4}
.method.disabled{opacity:.5;pointer-events:none}
.total{font-weight:700;margin:12px 0;font-size:1.05rem}
.btn{width:100%;background:#ff0050;color:#fff;border:none;padding:12px;border-radius:10px;font-weight:700;cursor:pointer;font-size:1rem}
.btn.secondary{background:#007bff}
/* overlay */
.overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.32);z-index:50;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}
.overlay.show{display:flex;animation:fadeIn .2s ease-in-out}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.panel{background:#fff;border-radius:14px;padding:18px;width:calc(100% - 40px);max-width:420px;text-align:center;box-shadow:0 18px 60px rgba(0,0,0,.25)}
.loader-dots{position:relative;width:60px;height:60px;margin:0 auto 12px}
.dot{width:16px;height:16px;border-radius:50%;position:absolute;top:50%;left:50%;margin:-8px}
.dot.red{background-color:#ff0050;transform-origin:-20px 0;animation:spinRed 1s linear infinite;}
.dot.blue{background-color:#007bff;transform-origin:20px 0;animation:spinBlue 1s linear infinite reverse;}
@keyframes spinRed{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
@keyframes spinBlue{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.success-icon{width:86px;height:86px;border-radius:50%;background:linear-gradient(135deg,#07b36e,#05a66a);display:flex;align-items:center;justify-content:center;color:#fff;font-size:40px;margin:0 auto 12px;box-shadow:0 12px 40px rgba(6,166,107,.18)}
.visa-card{background:linear-gradient(135deg,#0a66ff,#0057d9);color:#fff;border-radius:12px;padding:14px;text-align:left}
.visa-number{font-size:20px;letter-spacing:3px;font-weight:700;margin-top:10px}
.visa-row{display:flex;justify-content:space-between;align-items:center;margin-top:8px;font-size:13px;opacity:.95}
.close-x{position:absolute;right:14px;top:10px;font-size:18px;cursor:pointer;color:#999}
.custom-input{width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;font-size:1rem;text-align:center}
.header-left{display:flex;align-items:center;width:100%;padding:10px 16px;box-sizing:border-box;gap:8px}
.logo{height:32px}
.tiktok-username{font-weight:600;font-size:1rem}
.history-link{margin-left:auto;text-decoration:none;color:#007bff;font-size:0.9rem}
@media(max-width:420px){.coins-grid{grid-template-columns:1fr 1fr}.payment-methods{grid-template-columns:repeat(3,1fr)}}
</style>
</head>
<body>
<header>

<h1 class="title">Collect Rewards</h1>
</header>
<div class="header-left">
<img src="daidien3.png" alt="avatar" class="logo" style="width:20px;height:20px;border-radius:50%;" />
<span class="tiktok-username">meddii_saj</span>
<a href="#" class="history-link">View Reward log</a>
</div>

<!-- ✅ Updated Wallet + USD Display -->
<div class="stats" aria-live="polite" style="display:flex;flex-direction:column;align-items:flex-start;gap:4px;">
  <div style="display:flex;align-items:center;gap:6px;">
    <img src="wallet.png" alt="Wallet Icon" width="20" height="20">
   
    <div style="font-weight:800;font-size:1.1rem;">
      <span id="totalCoins">300,000,000</span>  <img src="coin.png" alt="coin icon" width="18" height="18"/>
    </div>
  </div>
  <div id="totalUsd" style="color:#666;font-size:0.95rem;margin-left:26px;">≈ $3,100,000.00</div>
</div>


<div class="input-section">
<input id="tiktokId" type="text"/>
</div>
<div class="coins-grid" id="coinGrid"></div>

<div class="payment-section">

<div class="payment-methods" id="methods">
<div class="method" data-method="Mastercard"><img src="visa.png" alt="Visa"/></div>
<div class="method" data-method="Mastercard"><img src="mastercard.png" alt="Mastercard"/></div>
<div class="method" data-method="Mastercard"><img src="paypal.png" alt="PayPal"/></div>
</div>
</div>
<div class="total">Total: $<span id="total">0.00</span></div>

<!-- Processing Overlay -->
<div id="processingOverlay" class="overlay" aria-hidden="true">
<div class="panel">
<div class="loader-dots">
<div class="dot red"></div>
<div class="dot blue"></div>
</div>
<div style="font-weight:700;margin-bottom:6px">Processing reward…</div>
<div style="color:#666;font-size:.95rem">Please wait a moment.</div>
</div>
</div>

<!-- Success Overlay -->
<div id="successOverlay" class="overlay" aria-hidden="true">
<div class="panel">
<div class="success-icon">✓</div>
<div style="font-weight:800;font-size:18px;margin-bottom:8px">Reward Sent!</div>
<div id="successText" style="color:#444;margin-bottom:12px"></div>
<button id="backBtn" class="btn secondary">Back to Home</button>
</div>
</div>

<!-- Visa Modal -->
<div id="visaOverlay" class="overlay" aria-hidden="true">
<div class="panel">
<div style="text-align:right"><span id="visaClose" class="close-x">✕</span></div>
<h3 style="margin:0 0 8px 0">Pay with Visa</h3>
<div class="visa-card">
<div style="display:flex;justify-content:space-between;align-items:center">
<div style="font-weight:800">VISA</div>
<img src="visa.png" alt="Visa" style="height:28px;filter:brightness(10) invert(1)"/>
</div>
<div class="visa-number">xxxx xxxx xxxx 3343</div>
<div class="visa-row"><div>Cardholder</div><div>Mehdi Hussain Sajwani</div></div>
<div class="visa-row"><div>EXP</div><div>12/28</div></div>
</div>
<p style="margin:12px 0 6px 0">Confirm payment with Visa ending 3343 (Mehdi Hussain Sajwani).</p>
<div style="display:flex;gap:10px;margin-top:12px">
<button id="visaCancel" style="flex:1;padding:10px;border-radius:8px;border:1px solid #ddd">Cancel</button>
<button id="visaConfirm" style="flex:1;padding:10px;border-radius:8px;background:#ff0050;color:#fff;border:none">Confirm</button>
</div>
</div>
</div>

<!-- PayPal Modal -->
<div id="paypalOverlay" class="overlay" aria-hidden="true">
<div class="panel" style="max-width:400px; padding:18px;">
<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
<h3 style="margin:0; color:#003087; font-weight:700;">Pay with PayPal</h3>
<span id="paypalClose" class="close-x">✕</span>
</div>
<div style="display:flex; align-items:center; gap:10px; margin-bottom:16px;">
<img src="paypal.png" alt="PayPal Logo" style="height:28px;">
<span id="paypalEmail" style="font-weight:600; color:#003087;">Mehdi_hus@gmail.com</span>
</div>
<div style="font-size:1.1rem; font-weight:700; margin-bottom:12px;">
Amount: $<span id="paypalAmount">0.00</span>
</div>
<button id="paypalPayBtn" class="btn" style="background:#ffc439; color:#111;">Redeem</button>
<button id="paypalCancelBtn" class="btn secondary" style="margin-top:8px;">Cancel</button>
</div>
</div>

<!-- Custom Input Modal -->
<div id="customOverlay" class="overlay" aria-hidden="true">
<div class="panel">
<h3 style="margin:0 0 8px 0">Custom Coins</h3>
<p style="color:#666;font-size:.95rem;margin:0 0 12px 0">Enter the number of coins you want to send:</p>
<input id="customInput" class="custom-input" type="number" min="1">
<div style="display:flex;gap:10px;margin-top:12px">
<button id="customCancel" style="flex:1;padding:10px;border-radius:8px;border:1px solid #ddd">Cancel</button>
<button id="customConfirm" style="flex:1;padding:10px;border-radius:8px;background:#ff0050;color:#fff;border:none">Confirm</button>
</div>
</div>
</div>

<script>
/* ---------- Config ---------- */
const packages = [{amount:30},{amount:300},{amount:1000},{amount:10000},{amount:100000}];
const baseCoins=30, baseUSD=0.31;
const unitPrice=baseUSD/baseCoins;

/* ---------- DOM refs ---------- */
const coinGrid=document.getElementById('coinGrid');
const totalEl=document.getElementById('total');
const processingOverlay=document.getElementById('processingOverlay');
const successOverlay=document.getElementById('successOverlay');
const successText=document.getElementById('successText');
const backBtn=document.getElementById('backBtn');
const totalCoinsEl=document.getElementById('totalCoins');
const visaOverlay=document.getElementById('visaOverlay');
const visaConfirm=document.getElementById('visaConfirm');
const visaCancel=document.getElementById('visaCancel');
const visaClose=document.getElementById('visaClose');
const methodNodes=Array.from(document.querySelectorAll('.method'));
const customOverlay=document.getElementById('customOverlay');
const customInput=document.getElementById('customInput');
const customConfirm=document.getElementById('customConfirm');
const customCancel=document.getElementById('customCancel');
const paypalOverlay=document.getElementById('paypalOverlay');
const paypalClose=document.getElementById('paypalClose');
const paypalCancelBtn=document.getElementById('paypalCancelBtn');
const paypalPayBtn=document.getElementById('paypalPayBtn');
const paypalAmount=document.getElementById('paypalAmount');

let selectedPackage=null, selectedMethod=null, totalCoins=300000000, processing=false;
function updateTotalsUI(){
  totalCoinsEl.textContent = totalCoins.toLocaleString();
  const totalUsd = totalCoins * unitPrice;
  document.getElementById('totalUsd').textContent = `≈ $${totalUsd.toFixed(2)}`;
}
updateTotalsUI();
function usdFormat(n){return n.toFixed(2);}

/* Render packages */
function renderPackages(){
packages.forEach(p=>{
  const price=+(unitPrice*p.amount).toFixed(2);
  const card=document.createElement('div');
  card.className='coin-card';
  card.innerHTML=`<div class="coin-top"><img src="coin.png" alt="coin icon"> ${p.amount}</div><div class="price">$${usdFormat(price)}</div>`;
  card.onclick=()=>{
    if(processing)return;
    document.querySelectorAll('.coin-card').forEach(c=>c.classList.remove('active'));
    card.classList.add('active');
    selectedPackage={amount:p.amount,price:price};
    totalEl.textContent=usdFormat(price);
  };
  coinGrid.appendChild(card);
});

// Custom card
const customCard=document.createElement('div');
customCard.className='coin-card';
customCard.innerHTML=`<div class="coin-top"><img src="coin.png" alt="coin icon"> Custom</div><div class="price">Enter amount</div>`;
customCard.onclick=()=>{
  if(processing)return;
  customInput.value='';
  customOverlay.classList.add('show');
};
coinGrid.appendChild(customCard);
renderPackages.customCard=customCard;
}
renderPackages();

/* Methods click */
methodNodes.forEach(m=>{
  m.onclick=()=>{
    if(processing)return;
    const method=m.getAttribute('data-method');
    const id=document.getElementById('tiktokId').value.trim();
    if(!id){alert('Please enter');return;}
    if(!selectedPackage){alert('Please select a coin package.');return;}
    if(selectedPackage.amount>totalCoins){alert('Not enough total coins available');return;}

    if(method==='Visa'){document.querySelectorAll('.method').forEach(x=>x.classList.remove('active')); m.classList.add('active'); selectedMethod='Visa'; visaOverlay.classList.add('show'); return;}
    if(method==='PayPal'){document.querySelectorAll('.method').forEach(x=>x.classList.remove('active')); m.classList.add('active'); selectedMethod='PayPal'; paypalAmount.textContent=usdFormat(selectedPackage.price); paypalOverlay.classList.add('show'); return;}
    document.querySelectorAll('.method').forEach(x=>x.classList.remove('active')); m.classList.add('active'); selectedMethod=method; startProcessing();
  }
});

/* Visa handlers */
visaCancel.onclick=visaClose.onclick=()=>{visaOverlay.classList.remove('show'); document.querySelectorAll('.method').forEach(x=>x.classList.remove('active')); selectedMethod=null;}
visaConfirm.onclick=()=>{visaOverlay.classList.remove('show'); selectedMethod='Visa (xxxx xxxx xxxx 3343 — Mehdi Hussain Sajwani)'; document.querySelectorAll('.method').forEach(x=>x.classList.remove('active')); document.querySelector('.method[data-method="Visa"]').classList.add('active'); startProcessing();}

/* Custom handlers */
customCancel.onclick=()=>{customOverlay.classList.remove('show');}
customConfirm.onclick=()=>{
  const val=Number(customInput.value);
  if(!val||val<=0||!Number.isFinite(val)){alert('Please enter a valid positive number of coins.'); return;}
  if(val>totalCoins){alert('Not enough total coins available'); return;}
  const price=val*unitPrice;
  selectedPackage={amount:val,price};
  totalEl.textContent=usdFormat(price);
  document.querySelectorAll('.coin-card').forEach(c=>c.classList.remove('active'));
  renderPackages.customCard.classList.add('active');
  customOverlay.classList.remove('show');
}

/* PayPal handlers */
paypalClose.onclick=paypalCancelBtn.onclick=()=>{paypalOverlay.classList.remove('show'); document.querySelectorAll('.method').forEach(x=>x.classList.remove('active')); selectedMethod=null;}
paypalPayBtn.onclick=()=>{
  paypalOverlay.classList.remove('show');
  selectedMethod='PayPal (Mehdi_hus@gmail.com)';
  document.querySelectorAll('.method').forEach(x=>x.classList.remove('active'));
  document.querySelector('.method[data-method="PayPal"]').classList.add('active');
  startProcessing();
}

/* Start payment simulation */
function startProcessing(){
if(!selectedPackage||!selectedMethod)return;
processing=true;
processingOverlay.classList.add('show');
setTimeout(()=>{
  processingOverlay.classList.remove('show');
  const id=document.getElementById('tiktokId').value.trim();
  totalCoins-=selectedPackage.amount;
  updateTotalsUI();
  successText.innerHTML=`Sent <b>${selectedPackage.amount.toLocaleString()}</b> coins ($${usdFormat(selectedPackage.price)}). \nThis operation has been completed. It will be processed within 24 hours!`;
  successOverlay.classList.add('show');
  processing=false;
},2000);
}

/* Back button */
backBtn.onclick=()=>{
  successOverlay.classList.remove('show');
  document.getElementById('tiktokId').value='';
  totalEl.textContent='0.00';
  document.querySelectorAll('.method,.coin-card').forEach(x=>x.classList.remove('active'));
  selectedPackage=null;
  selectedMethod=null;
}
</script>
</body>
</html>

